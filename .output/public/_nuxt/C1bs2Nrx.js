import{d as V,r as u,H as b,y as k,C as o,D as s,g as l,F as C,z as h,A as U,I as B,J as f,K as E,L as K,E as N,M as _,_ as R}from"./BxW7P6YO.js";const q={class:"login-container"},I=V({__name:"login",setup(L){const g=C(),a=u({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},d=u(),r=u(!1),i=b();async function p(){d.value.validate(async c=>{if(c){r.value=!0;try{await i.login(a.value.username,a.value.password),await i.fetchUser(),_.success("登录成功"),g.push("/")}catch(e){_.error(e.message||"用户名或密码错误")}finally{r.value=!1}}})}return(c,e)=>{const m=l("el-input"),t=l("el-form-item"),w=l("el-button"),y=l("el-form"),x=l("el-card");return h(),k("div",q,[o(x,{class:"login-card"},{default:s(()=>[e[3]||(e[3]=U("div",{class:"login-title"},"订单管理系统",-1)),o(y,{model:a.value,rules:v,ref_key:"formRef",ref:d,onKeyup:B(p,["enter"])},{default:s(()=>[o(t,{prop:"username"},{default:s(()=>[o(m,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.username=n),placeholder:"请输入用户名","prefix-icon":f(E),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),o(t,{prop:"password"},{default:s(()=>[o(m,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.password=n),type:"password",placeholder:"请输入密码","prefix-icon":f(K),"show-password":"",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),o(t,null,{default:s(()=>[o(w,{type:"primary",style:{width:"100%"},onClick:p,loading:r.value},{default:s(()=>e[2]||(e[2]=[N(" 登录 ")])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1,__:[3]})])}}}),S=R(I,[["__scopeId","data-v-3ecb3159"]]);export{S as default};
